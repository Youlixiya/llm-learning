<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>4. RAG（检索增强生成）· LLM 实战教程</title>
    <meta
      name="description"
      content="构建知识库问答系统，从数据预处理、索引构建到在线检索与回答的完整 RAG 流程。"
    />
    <link rel="stylesheet" href="../style.css" />
    <script src="../theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body class="page-root">
    <header>
      <div class="container nav">
        <div class="nav-left">
          <div class="nav-logo"></div>
          <div class="nav-title">
            <span class="nav-title-main">LLM 实战教程</span>
            <span class="nav-title-sub">4. RAG（检索增强生成）</span>
          </div>
        </div>
        <nav class="nav-links">
          <a href="../index.html" class="nav-link">返回首页</a>
          <button class="theme-toggle nav-link" onclick="toggleTheme()" aria-label="切换主题">☀️</button>
          <a href="chapter-3-instruction-finetune-lora.html" class="nav-link">
            ← 上一章 · 指令微调与 LoRA
          </a>
          <a href="chapter-5-agents-and-tools.html" class="nav-link">
            下一章 · Agent 与工具调用 →
          </a>
        </nav>
      </div>
    </header>

    <main>
      <div class="container">
        <div class="chapter-layout">
          <aside class="chapter-sidebar">
            <div class="chapter-sidebar-title">教程导航</div>
            <ul class="chapter-sidebar-list">
              <li>
                <a href="chapter-0-intro.html">
                  <span></span>
                  0. 引言
                </a>
              </li>
              <li>
                <a href="chapter-1-transformer-basics.html">
                  <span></span>
                  1. Transformer 与语言模型基础
                </a>
              </li>
              <li>
                <a href="chapter-2-tiny-lm-training.html">
                  <span></span>
                  2. Tiny LM 训练与生成
                </a>
              </li>
              <li>
                <a href="chapter-3-instruction-finetune-lora.html">
                  <span></span>
                  3. 指令微调与 LoRA
                </a>
              </li>
              <li>
                <a href="chapter-4-rag-system.html">
                  <span></span>
                  4. RAG（检索增强生成）（当前）
                </a>
              </li>
              <li>
                <a href="chapter-5-agents-and-tools.html">
                  <span></span>
                  5. Agent 与工具调用
                </a>
              </li>
            </ul>
          </aside>

          <article class="chapter-content">
            <div class="chapter-meta-row">
              <div class="chapter-breadcrumb">
                <a href="../index.html">LLM 实战教程</a>
                <span> / </span>
                <a href="chapter-0-intro.html">0. 引言</a>
                <span> / </span>
                <a href="chapter-3-instruction-finetune-lora.html">
                  3. 指令微调与 LoRA
                </a>
                <span> / </span>
                <span>4. RAG（检索增强生成）</span>
              </div>
              <span class="status-pill">
                <span class="status-dot"></span>
                建议结合 <code>src/rag</code> 与示例数据一起实践
              </span>
            </div>

            <h1 class="chapter-title">4. RAG（检索增强生成）</h1>
            <p class="chapter-subtitle">
              本页内容由 <code>docs/04_rag_system.md</code>
              动态加载，对应仓库中的 RAG 构建脚本与查询逻辑。
            </p>

            <div id="chapter-md" class="chapter-md loading">
              正在载入文档内容，请稍候……
            </div>

            <div class="chapter-nav-bottom">
              <a href="chapter-3-instruction-finetune-lora.html">
                ← 上一章：3. 指令微调与 LoRA
              </a>
              <a href="chapter-5-agents-and-tools.html">
                下一章：5. Agent 与工具调用 →
              </a>
            </div>
          </article>
        </div>
      </div>
    </main>

    <footer>
      <div class="container footer-row">
        <div>
          <div>LLM 实战教程 · Chapter 4</div>
          <div>让模型“先查资料再回答”，构建真正实用的知识库问答。</div>
        </div>
        <div class="footer-right">
          <span class="badge">
            <span class="badge-dot"></span>
            <span>RAG 流程与工程实践</span>
          </span>
          <a
            class="nav-link"
            href="https://github.com/youlixiya/llm-learning/blob/main/docs/04_rag_system.md"
            target="_blank"
            rel="noreferrer"
          >
            在 GitHub 上查看 Markdown →
          </a>
        </div>
      </div>
    </footer>

    <script>
      (function () {
        const target = document.getElementById("chapter-md");
        if (!target) return;

        const basePath = window.location.pathname.match(/^(\/[^\/]+\/)/)?.[1] || '';
        const paths = [
          "../docs/04_rag_system.md",
          basePath + "docs/04_rag_system.md",
          "docs/04_rag_system.md",
          "../web/docs/04_rag_system.md"
        ];

        function renderMarkdown(text) {
          try {
            if (typeof marked === 'undefined') {
              throw new Error('Marked.js library not loaded');
            }
            const html = marked.parse(text);
            target.classList.remove("loading");
            target.classList.remove("error");
            target.innerHTML = html;
          } catch (e) {
            console.error('Error parsing markdown:', e);
            target.classList.remove("loading");
            target.classList.add("error");
            target.innerHTML = '<p>渲染 Markdown 时出错：' + e.message + '</p>';
          }
        }

        function tryLoad(index) {
          if (index >= paths.length) {
            target.classList.remove("loading");
            target.classList.add("error");
            target.innerHTML = '<p>无法加载 docs/04_rag_system.md</p><p>已尝试的路径：</p><ul>' + 
              paths.map(p => '<li><code>' + p + '</code></li>').join('') + '</ul>';
            return;
          }

          const path = paths[index];
          console.log('Trying to load:', path);

          fetch(path)
            .then((res) => {
              if (!res.ok) {
                throw new Error("HTTP " + res.status);
              }
              return res.text();
            })
            .then(renderMarkdown)
            .catch((err) => {
              console.warn('Failed to load:', path, err);
              tryLoad(index + 1);
            });
        }

        tryLoad(0);
      })();
    </script>
  </body>
</html>

